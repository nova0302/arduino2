#+TITLE:     아두이노를 위한 C/C++ 특강
#+AUTHOR:    Sanglae Kim
#+EMAIL:     nova0302@hotmail.com
#+LANGUAGE:  en
#+OPTIONS:  toc:nil H:3 num:t \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil ltoc:t mouse:underline buttons:0 path:https://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+startup: beamer
#+LaTeX_CLASS: beamer
#+LaTeX_CLASS_OPTIONS: [presentation, smaller]
#+LATEX_HEADER: \usepackage{kotex, listings}
#+BEAMER_FRAME_LEVEL: 2
#+BEAMER_THEME: Frankfurt
#+BEAMER_INNER_THEME: rounded
#+COLUMNS: %40ITEM %10BEAMER_env(Env) %9BEAMER_envargs(Env Args) %4BEAMER_col(Col) %10BEAMER_extra(Extra)

* 26. 콘솔입출력 및 연산자
*** 입출력함수
    - 출력합수
      - puts
      - fputs
      - putchar
      - printf
    - 입력함수
      - getchar
      - gets
      - scanf
*** printf
    #+BEGIN_SRC C
          int printf( const char * format, ...);
    #+END_SRC
    - 표준출력(모니터)으로 format이 지정하는 문자열을 출력한다.
    - http://www.cplusplus.com/reference/cstdio/printf/
*** printf 예제 
**** Source Code
    #+BEGIN_SRC C -n
 #include <stdio.h>
 int main(){
    printf ("Characters: %c %c \n", 'a', 65);
    printf ("Decimals: %d %ld\n", 1977, 650000L);
    printf ("Preceding with blanks: %10d \n", 1977);
    printf ("Width trick: %*d \n", 5, 10);
    printf ("%s \n", "A string");
    return 0;
 }
    #+END_SRC

**** 실행결과
 #+BEGIN_EXAMPLE
      Characters:  a             A       
      Decimals:    1977     650000       
      Preceding    with    blanks:  1977 
      Width        trick:       10       
      A            string                
 #+END_EXAMPLE

*** scanf
    #+BEGIN_SRC C
  int scanf(const char * format, ...);
    #+END_SRC
    - 표준입력(키보드)으로부터 데이터를 입력받아 format에 따라 추가적인 파라미터가 가리키는 변수에 저장한다.
    - http://www.cplusplus.com/reference/cstdio/scanf/
*** scanf 예제
#+BEGIN_SRC C -n
#include <stdio.h>
int main (){
  char str [80];
  int i;

  printf ("Enter your family name: ");
  scanf ("%79s",str);  
  printf ("Enter your age: ");
  scanf ("%d",&i);
  printf ("Mr. %s , %d years old.\n",str,i);
  printf ("Enter a hexadecimal number: ");
  scanf ("%x",&i);
  printf ("You have entered %#x (%d).\n",i,i);

  return 0;
}
#+END_SRC

*** 실행결과
#+BEGIN_EXAMPLE
Enter your family name: Soulie
Enter your age: 29
Mr. Soulie , 29 years old.
Enter a hexadecimal number: ff
You have entered 0xff (255).
#+END_EXAMPLE

*** 연산자
    - 사칙연산자
      - +, -, *, /
    - 삼항연산자
      - bigNumber = (2 > 3) ? 2 : 3;
    - 나머지 연산자( % )
      - r = 7 % 2
    - 단항연산자
      - ++, --
*** 삼항연산자 예제
**** source code
#+BEGIN_SRC C -n
#include <stdio.h>
int main(int argc, char *argv[])
{
  int num1=3, num2=4;
  int bigNumber;
//  fputs("Enter two numbers : ", stdout);
//  scanf("%d %d", &num1, &num2);
  bigNumber = (num1 > num2) ? num1 : num2;
  printf("The big number is  %d \n", bigNumber);
  return 0;
}
#+END_SRC
**** 실행결과
#+RESULTS:
: The big number is  4

*** 응용예제
**** source code
#+BEGIN_SRC C -n
  #include <stdio.h>
  int main(){
    int temp = 0;
    int N = 10;
    for (int i=0; i<N; i++)
      if(i%2)
	temp += i;
    printf("Sum of odd numbers from 0 to %d is %d\n", N, temp);
  }
#+END_SRC
**** 실행결과
#+RESULTS:
: Sum of odd numbers from 0 to 10 is 25

*** %기호 출력하기
**** Source Code
#+BEGIN_SRC C -n
  #include <stdio.h>
  int main(){
    for(int i=0; i<8; i++ ){
      for (int j=2; j<6; j++)
	printf("%d %% %d = %d \t", i, j, i%j);
      puts("");
    }
    return 0;
  }
#+END_SRC
**** 실행결과
#+BEGIN_EXAMPLE
 0 % 2 = 0  0 % 3 = 0  0 % 4 = 0  0 % 5 = 0 
 1 % 2 = 1  1 % 3 = 1  1 % 4 = 1  1 % 5 = 1 
 2 % 2 = 0  2 % 3 = 2  2 % 4 = 2  2 % 5 = 2 
 3 % 2 = 1  3 % 3 = 0  3 % 4 = 3  3 % 5 = 3 
 4 % 2 = 0  4 % 3 = 1  4 % 4 = 0  4 % 5 = 4 
 5 % 2 = 1  5 % 3 = 2  5 % 4 = 1  5 % 5 = 0 
 6 % 2 = 0  6 % 3 = 0  6 % 4 = 2  6 % 5 = 1 
 7 % 2 = 1  7 % 3 = 1  7 % 4 = 3  7 % 5 = 2 
#+END_EXAMPLE

* 27. 조건문과 반복문
*** if (조건) {실행문} else {실행문}
#+BEGIN_SRC C -n
  #include <stdio.h>
  typedef enum _Fruits {BANANA, APPLE} Fruits;
  Fruits theFruit;
  int main () {
    int ret;
    for(;;){
      printf("Which fruit do you like?\n");
      printf("0. Banana 1. Apple ");
      ret = scanf("%d", &theFruit);
      if(ret == EOF) break;
      printf("Your answer is %d\n",theFruit);
      if(theFruit == BANANA)
	printf("It's banana\n");
      else if(theFruit == APPLE)
	printf("It's apple\n");
      else
	printf("O Oh!! Your got the wrong fruit.....\n");
    }
  }
#+END_SRC

*** switch-case 
#+BEGIN_SRC C -n
  #include <stdio.h>
  typedef enum _Fruits {BANANA, APPLE} Fruits;
  Fruits theFruit;
  int main () {
    for(;;){
      int ret;
      printf("Which fruit do you like?\n");
      printf("0. Banana 1. Apple ");
      ret = scanf("%d", &theFruit);
      if(ret == EOF) break;
      printf("Your answer is %d\n",theFruit);
      switch (theFruit) {
      case BANANA:
	printf("It's banana\n");
	break;
      case APPLE:
	printf("It's apple\n");
	break;
      default:
	printf("O Oh!! Your got the wrong fruit.....\n");
	break;
      }
    }
  }
#+END_SRC

*** for loop
#+BEGIN_SRC C -n
// Factirial 예제
  #include <stdio.h>
  #define FU_ERROR -100
  int fact(int);
  int main(int argc, char *argv[])
  {
    int n, result;
    fputs("Enter a inteer number bigger than 0: ", stdout);
    scanf("%d", &n);
    result = fact(n);
    if(result == FU_ERROR)
      puts("unexpected error!!!!");
    else
      printf("%d! = %d \n", n, result);
    return 0;
  }
  int fact(int N){
    int f = 1;
    int i;
    if(N < 1) return FU_ERROR;
    for (i=1; i<=N; i++) {
      f *= i;
    }
    return f;
  }
#+END_SRC


*** for loop with while
#+BEGIN_SRC C -n
// 약수구하기
#include <stdio.h>
int main()
{
  int num;
  int ret;
  int i;
  while(1){
    fputs("Enter a number bigger than 1 : ", stdout);
    ret = scanf("%d", &num);
    if(ret == EOF)
      break;
    else if(num <1 )
      puts("The number must be bigger than 1,  Enter again \n");
    else{
      printf("factors of %d \n", num);
      for (i=1; i<num; i++) {
        if((num%i) == 0)
          printf("%d ", i);
      }
      printf("\n\n");
    }
  }
}
#+END_SRC

*** continue 예제
#+BEGIN_SRC C -n
  #include <stdio.h>
  int main(int argc, char *argv[])
  {
    int num1, num2, i;
    int total = 0;
    int start, end;
    fputs("Enter two integer numbers : ", stdout);
    scanf("%d %d", &num1, &num2);
    if(num1 > num2){
      start = num2;
      end = num1;
    }else{
      start = num1;
      end = num2;
    }
    for (i = start; i<= end; i++) {
      if(!(i%3) || !(i%5)){
	printf("%d is excluded. \n", i);
	continue;
      }
      total += i;
    }
    printf("The sum from %d to %d : %d\n", num1, num2, total);
    return 0;
  }
#+END_SRC

* 28. 배열 및 문자열
*** 문자열 예제
#+BEGIN_SRC C -n
// 소문자 문자열을 입력받아서 대문자로 바꾸기
  #include <stdio.h>
  int main(int argc, char *argv[]){
    char ch;
    int diff = 'A' - 'a';
    fputs("Enter a character string : ", stdout);
    while (1) {
      ch = getchar();
      if( ch == '\n' ) break;
      else if('a' <= ch && ch <= 'z')
	putchar(ch+diff);
      else if('A' <= ch && ch <= 'z')
	putchar(ch-diff);
      else
	putchar(ch);
    }
    return 0;
  }
#+END_SRC

*** 1 차원 배열
#+BEGIN_SRC C -n
  #include <stdio.h>
  int sumOfArray(int * arrPtr, int arrLen){
    int total = 0;
    int i;
    for (i = 0; i<arrLen; i++) {
      total = arrPtr[i];
    }
    return total;
  }
  int main(int argc, char *argv[])  {
    int arr1[3] = {5, 10, 15};
    int arr2[] = {1, 2, 3, 4, 5};
    int sumOfArrayResult;
    sumOfArrayResult = sumOfArray(arr1, sizeof(arr1)/sizeof(int));
    printf("5 + 10 + 15 : %d \n", sumOfArrayResult);
    sumOfArrayResult = sumOfArray(arr2, sizeof(arr2)/sizeof(int));
    printf("1+2+3+4+5 : %d \n", sumOfArrayResult);
    return 0;
  }
#+END_SRC
*** 2 차원 배열 기본 예제
#+BEGIN_SRC C -n
/*
+-----+--------+-------+-------+
|     |C1      |c2     |c3     |
+-----+--------+-------+-------+
|r1   |x[0][0] |x[0][1]|x[0][2]|
+-----+--------+-------+-------+
|r2   |x[1][[0]|x[1][1]|x[1][2]|
+-----+--------+-------+-------+
*/
#include<stdio.h>
void print(int (*arr)[3], int s1, int s2) {
  int i, j;
  for(i = 0; i<s1; i++){
    for(j = 0; j<s2; j++)
      printf("%d, ", arr[i][j]);
    puts("");
  }
}
int main() {
  //  int a[3][4] = {{6}};
  int a[4][3] = { {1,2,3},
                  {4,5,6},
                  {4,5,6},
                  {7,8,9} };
  print(a,4,3);
}
#+END_SRC

#+RESULTS:
| 1 | 2 | 3 |   |
| 4 | 5 | 6 |   |
| 4 | 5 | 6 |   |
| 7 | 8 | 9 |   |

*** 2 차원 배열 응용
#+BEGIN_SRC C -n
  #include <stdio.h>
  int sumOfArrayBy2(int (*arrPtr)[2], int column){
    int total = 0;
    int i,j;
    for (i = 0; i<column; i++)
      for (j=0; j<2; j++)
	total += arrPtr[i][j];
    return total;
  }
  int sumOfArrayBy3(int (*arrPtr)[3], int column){
    int total =0;
    int i,j;
    for (i = 0; i<column; i++)
      for (j=0; j<3; j++)
	total += arrPtr[i][j];
    return total;
  }
  int main(int argc, char *argv[])  {
    int arr3[2][2] = {1,3,5,7};
    int arr4[2][3] = {1,2,3,4,5,6};
    int sumOfArrResult;

    sumOfArrResult = sumOfArrayBy2(arr3, 2);
    printf("1+3+5+7 = %d \n", sumOfArrResult);

    sumOfArrResult = sumOfArrayBy3(arr4, 2);
    printf("1+2+3+4+5+6 = %d \n", sumOfArrResult);

    return 0;
  }
#+END_SRC

#+RESULTS:
|     1+3+5+7 | = | 16 |
| 1+2+3+4+5+6 | = | 21 |

**** A block                                          :B_ignoreheading:BMCOL:
     :PROPERTIES:
     :BEAMER_env: ignoreheading
     :BEAMER_col: 0.4
     :END:
     - this slide consists of two columns
     - the first (left) column has no heading and consists of text
     - the second (right) column has an image and is enclosed in an
       @example@ block
**** A screenshot                                           :BMCOL:B_example:
     :PROPERTIES:
     :BEAMER_col: 0.6
     :BEAMER_env: example
     :END:
     - this slide consists of two columns
     - the first (left) column has no heading and consists of text
     - the second (right) column has an image and is enclosed in an

* 29. 다양한 함수 만들기
*** Two columns
* 30. 구조체 및 클래스
*** struct
 #+BEGIN_SRC C -n
//    - 데이터와 이를 처리하는 함수가 분리
   typedef struct _Cpx{int32_t r, i;}Cpx;
   Cpx addCpx(Cpx c1, Cpx c2){
     Cpx temp;
     temp.r = c1.r + c2.r;
     temp.i = c1.i + c2.i;
     return temp;
   }
   void setup(){Serial.begin(9600);}
   void loop(){
     Cpx c1={3,4}, c2={5,6}, c3;
     c3 = addCpx(c1,c2);
     Serial.print("c3"); Serial.print("("); Serial.print(c3.r); 
     Serial.print(","); Serial.print(c3.i); Serial.print(")");
     while(1){}
   }
 #+END_SRC

*** class
 #+BEGIN_SRC C -n
//  - 데이터와 이를 처리하는 함수가 하나의 클래스내에 존재 
class Cpx{
 public:
   int32_t r, i;
   Cpx(int32_t r_, int32_t i_):r(r_), i(i_){}
   Cpx():r(0), i(0){}
   Cpx(const Cpx &c):r(c.r),i(c.i){}
   void add(Cpx c){
     r = r+ c.r;
     i = i+ c.i;
   }
   const Cpx& operator=(const Cpx& c){
     r = c.r;
     i = c.i;
     return *this;
   }
   Cpx operator+(Cpx c){
     Cpx temp;
     temp.r = r+c.r;
     temp.i = i+c.i;
     return temp;
   }
 };
 void setup(){Serial.begin(9600);}
 void loop(){
   Cpx c1(3,4), c2(2,3), c3;
   c3 = c1+c2;
   c1.add(c2);
   Serial.print("c1"); Serial.print("("); Serial.print(c1.r); 
   Serial.print(","); Serial.print(c1.i); Serial.println(")");
   Serial.print("c3"); Serial.print("("); Serial.print(c3.r); 
   Serial.print(","); Serial.print(c3.i); Serial.print(")");
   while(1){}
 }
 #+END_SRC


* emacs 
*** saving rectangles in registers
    - C-x r r r : copy the rec region into register r
    - C-x r i r : paste the value of register r into the buffer
